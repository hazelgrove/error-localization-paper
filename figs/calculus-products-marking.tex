\begin{figure}[htbp]
  \small\raggedright
  \judgbox{\ctxSynFixedInto{\ctx}{\EMV}{\ECMV}{\TMV}} $\EMV$ is marked into $\ECMV$ and synthesizes type $\TMV$
  %
  \begin{mathpar}
    \judgment{
      \ctxSynFixedInto{\ctx}{\EMV_1}{\ECMV_1}{\TMV_1} \\
      \ctxSynFixedInto{\ctx}{\EMV_2}{\ECMV_2}{\TMV_2}
    }{
      \ctxSynFixedInto{\ctx}{\EPair{\EMV_1}{\EMV_2}}{\ECPair{\ECMV_1}{\ECMV_2}}{\TProd{\TMV_1}{\TMV_2}}
    }{ISPair}
  
    \judgment{
      \ctxSynFixedInto{\ctx}{\EMV}{\ECMV}{\TMV} \\
      \matchedProd{\TMV}{\TMV_1}{\TMV_2}
    }{
      \ctxSynFixedInto{\ctx}{\EProjL{\EMV}}{\ECProjL{\ECMV}}{\TMV_1}
    }{ISProjL1}
  
    \judgment{
      \ctxSynFixedInto{\ctx}{\EMV}{\ECMV}{\TMV} \\
      \notMatchedProd{\TMV}{\TMV_1}{\TMV_2}
    }{
      \ctxSynFixedInto{\ctx}{\EProjL{\EMV}}{\ECProjL{\ECInconMatchedPair{\ECMV}}}{\TMV_1}
    }{ISProjL2}
  
    \judgment{
      \ctxSynFixedInto{\ctx}{\EMV}{\ECMV}{\TMV} \\
      \matchedProd{\TMV}{\TMV_1}{\TMV_2}
    }{
      \ctxSynFixedInto{\ctx}{\EProjR{\EMV}}{\ECProjR{\ECMV}}{\TMV_2}
    }{ISProjR1}
  
    \judgment{
      \ctxSynFixedInto{\ctx}{\EMV}{\ECMV}{\TMV} \\
      \notMatchedProd{\TMV}{\TMV_1}{\TMV_2}
    }{
      \ctxSynFixedInto{\ctx}{\EProjR{\EMV}}{\ECProjR{\ECInconMatchedPair{\ECMV}}}{\TMV_2}
    }{ISProjR2} \\
  \end{mathpar}
  
  \judgbox{\ctxAnaFixedInto{\ctx}{\EMV}{\ECMV}{\TMV}} $\EMV$ is marked into $\ECMV$ and analyses against type $\TMV$
  %
  \begin{mathpar}
    \judgment{
      \matchedProd{\TMV}{\TMV_1}{\TMV_2} \\
      \ctxAnaFixedInto{\ctx}{\EMV_1}{\ECMV_1}{\TMV_1} \\
      \ctxAnaFixedInto{\ctx}{\EMV_2}{\ECMV_2}{\TMV_2}
    }{
      \ctxAnaFixedInto{\ctx}{\EPair{\EMV_1}{\EMV_2}}{\ECPair{\ECMV_1}{\ECMV_2}}{\TMV}
    }{IAPair}

    \judgment{
      \ctxAnaFixedInto{\ctx}{\EMV}{\ECMV}{\TProd{\TMV}{\TUnknown}}
    }{
      \ctxAnaFixedInto{\ctx}{\EProjL{\EMV}}{\ECProjL{\ECMV}}{\TMV}
    }{IAProjL}
  
    \judgment{
      \ctxAnaFixedInto{\ctx}{\EMV}{\ECMV}{\TProd{\TMV}{\TUnknown}}
    }{
      \ctxAnaFixedInto{\ctx}{\EProjR{\EMV}}{\ECProjR{\ECMV}}{\TMV}
    }{IAProjR}
  \end{mathpar}
  %
  \caption{Marking rules for binary products.}
  \label{fig:calculus-products-marking}
\end{figure}
