\begin{figure}[htbp]
  \small\raggedright
  %
  \[\begin{array}{rrcl}
    \ECMName & \ECMV & \Coloneqq & \cdots
                                 \mid \ECPair{\ECMV}{\ECMV}
                                 \mid \ECProjL{\ECMV} \mid \ECProjR{\ECMV}
                                 \mid \ECInconMatchedPair{\ECMV}
  \end{array}\]

  \judgbox{\ctxSynType{\ctx}{\ECMV}{\TMV}} $\ECMV$ synthesizes type $\TMV$
  %
  \begin{mathpar}
    \judgment{
      \ctxSynType{\ctx}{\ECMV_1}{\TMV_1} \\
      \ctxSynType{\ctx}{\ECMV_2}{\TMV_2}
    }{
      \ctxSynType{\ctx}{\ECPair{\ECMV_1}{\ECMV_2}}{\TProd{\TMV_1}{\TMV_2}}
    }{MSPair}

    \judgment{
      \ctxSynType{\ctx}{\ECMV}{\TMV} \\
      \matchedProd{\TMV}{\TMV_1}{\TMV_2}
    }{
      \ctxSynType{\ctx}{\ECProjL{\ECMV}}{\TMV_1}
    }{MSProjL1}
  
    \judgment{
      \ctxSynType{\ctx}{\ECMV}{\TMV} \\
      \notMatchedProd{\TMV}{\TMV_1}{\TMV_2}
    }{
      \ctxSynType{\ctx}{\ECProjL{\ECInconMatchedPair{\ECMV}}}{\TUnknown}
    }{MSProjL2}
  
    \judgment{
      \ctxSynType{\ctx}{\ECMV}{\TMV} \\
      \matchedProd{\TMV}{\TMV_1}{\TMV_2}
    }{
      \ctxSynType{\ctx}{\ECProjR{\ECMV}}{\TMV_2}
    }{MSProjR1}
  
    \judgment{
      \ctxSynType{\ctx}{\ECMV}{\TMV} \\
      \notMatchedProd{\TMV}{\TMV_1}{\TMV_2}
    }{
      \ctxSynType{\ctx}{\ECProjR{\ECInconMatchedPair{\ECMV}}}{\TUnknown}
    }{MSProjR2} \\
  \end{mathpar}
  
  \judgbox{\ctxAnaType{\ctx}{\ECMV}{\TMV}} $\ECMV$ analyzes against type $\TMV$
  %
  \begin{mathpar} 
    \judgment{
      \matchedProd{\TMV}{\TMV_1}{\TMV_2} \\
      \ctxAnaType{\ctx}{\ECMV_1}{\TMV_1} \\
      \ctxAnaType{\ctx}{\ECMV_2}{\TMV_2}
    }{
      \ctxAnaType{\ctx}{\ECPair{\ECMV_1}{\ECMV_2}}{\TMV}
    }{MAPair}
  
    \judgment{
      \ctxAnaType{\ctx}{\ECMV}{\TProd{\TMV}{\TUnknown}}
    }{
      \ctxAnaType{\ctx}{\ECProjL{\ECMV}}{\TMV}
    }{MAProjL}
  
    \judgment{
      \ctxAnaType{\ctx}{\ECMV}{\TProd{\TUnknown}{\TMV}}
    }{
      \ctxAnaType{\ctx}{\ECProjR{\ECMV}}{\TMV}
    }{MAProjR}
  \end{mathpar}
  %
  \caption{Marked binary product syntax and typing rules.}
  \label{fig:calculus-products-mexp-typing}
\end{figure}
